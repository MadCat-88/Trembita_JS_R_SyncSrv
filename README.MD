# Проєкт Взаємодії з Трембітою. Javascript REST Service

## Опис

Цей проєкт входить в набір прикладів взаємодії з API шлюзу безпечного обміну системи Трембіта (ШБО), що демонструють технічні особливості розробки вебсервісів та вебклієнтів, сумісних з системою Трембіта. Даний проєкт представляє опис створення сумісного REST-сервісу на мові програмування Javascript з використанням Node.js та фреймворку EXPRESS. EXPRESS - швидкий, мінімалістичний веб-фреймворк для Node.js. для побудови API. Проєкт підтримує систему Трембіта (логування заголовків).
Приклад описує отримання з умовної бази даних (реєстру) відомостей про інформаційні об'єкти (у прикладі об'єктом є користувач) та управління їх статусом, у тому числі обробку запитів на пошук, отримання, створення, редагування та видалення об'єктів через REST API, що доступне через систему Трембіта.

## Вимоги

- Node js 20.14.0+
- Git (для клонування репозиторію)
- MariaDB 10.5+
- Ubuntu Server 24.04 -- рекомендована ОС для розгортання серверу.

## Структура проєкту

Структура проєкту виглядає наступним чином:

```bash
rest-sync-service-node-express-js/
|-- config                                  # Директорія з конфігурацією застосунку
|   |-- config.js                           # Конфігурація бд
|-- controllers                             # Директорія з контролерами
|   |-- personController.js                 # Контролер для роботи з особами
|   |-- statusController.js                 # Контролер для роботи зі статусом
|-- logs                                    # Директорія для зберігання логів
|   |-- combined.log                        # Логи для об'єднаних повідомлень
|   |-- error.log                           # Логи для повідомлень про помилки
|-- middleware                              # Директорія з проміжними обробниками 
|   |-- contentTypeValidation.js            # Валідація типів вмісту
|   |-- logger.js                           # Логування
|   |-- personValidation.js                 # Валідація параметрів
|   |-- requestLogger.js                    # Логування запитів
|   |-- responseLogger.js                   # Логування відповідей
|-- migrations                              # Директорія з міграціями бази даних
|   |-- 20240518104703-add_Persons_table.js # Конфігурація міграцій БД для додавання таблиці осіб
|-- models                                  # Директорія з моделями даних
|   |-- index.js                            # Підключення моделей 
|   |-- Person.js                           # Модель особи
|-- node_modules *                          # Директорія з залежностями Node.js
|-- routes                                  # Директорія з маршрутами 
|   |-- person.js                           # Маршрути для роботи з особами
|   |-- status.js                           # Маршрути для роботи зі статусами
|-- services                                # Директорія з сервісами
|   |-- personService.js                    # Сервіс для обробки логіки роботи з особами
|   |-- statusService.js                    # Сервіс для обробки логіки роботи зі статусом
|-- .env                                    # Конфігурація середовища
|-- .gitignore                              # Ігнорування файлів Git
|-- .sequelizerc                            # Конфігурація Sequelize
|-- app.js                                  # Основний файл застосунку
|-- deploy.sh                               # Скрипт для автоматизації встановлення
|-- index.js                                # Точка входу застосунку
|-- package.json                            # Залежності проєкту
|-- package-lock.json                       # Файл блокування залежностей
|-- README.MD                               # Документація проєкту
|-- swagger-output.json                     # Вихідний файл Swagger документації
|-- swagger.js                              # Конфігурація Swagger документації
```

## Розгортання

- Для ручного розгортання дивіться [тут](./docs/manual_installation.md).
- Для розгортання за допомогою скрипта дивіться [тут](./docs/script_installation.md).
- Для розгортання у Docker дивіться [тут](./docs/docker_installation.md).
- Для налаштування HTTPS зверніться до цієї інструкції [тут](./docs/https_nginx_reverse_proxy.md).

## Видалення

Ми додали скрипт `remove.sh` для автоматизації процесу видалення сервісу та очищення системи.
Скрипт працює лише у випадку якщо проєкт було розгорнуто також за допомогою скрипту автоматичного розгортання.
Також ми додали [інструкцію](./docs/delete.md) для ручного видалення. 

### Використання скрипта remove.sh

1. Зробіть файл виконуваним:

   ```bash
   chmod +x remove.sh
   ```

2. Запустіть скрипт:

   ```bash
   ./remove.sh
   ```

Скрипт автоматично зупинить та видалить системний сервіс, видалить віртуальне середовище, клонований репозиторій та системні залежності.


## Внесок

Якщо ви хочете зробити свій внесок у проєкт, будь ласка, створіть форк репозиторію і відправте Pull Request.

## Ліцензія

Цей проект ліцензується відповідно до умов MIT License.